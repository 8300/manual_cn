

3. irc 概念
此章节专门讲解irc协议逻辑背后的思想及如何实现处理不同类别的信息。
3.1 一对一通讯
在一对一基础上的通讯通常是由客户端执行，因为大多数服务器-服务器通讯不是仅仅为了服务器相互通讯的结果。为了给客户端之间通讯提供一个安全的方法，要求所有服务器都能沿着生成树的一个方向发送消息，以到达任何客户端。消息被传送的路径是生成树上两点之间最短的路径。
下面的例子都参看上面的图2.
实例1：
一条客户端1和客户端2之间的消息只被服务器a看到，直接被服务器发送给客户端2
实例2：
一条客户端1和3的消息，被服务器A和B及客户3看到，其他客户和服务器不允许看到
实例3：
一条客户端2和4的消息，只被服务器A,B,C,D及客户端4看到。
3.2 一对多
irc的主要目标是提供一个简单高效的会议场所（一对多讨论）。irc提供了几种方法去实现这个，每种方法都有自己的目的。
3.2.1 对列表
一对多谈话最高效的方式是通过客户端跟用户列表谈话。如何做到这一点几乎是不言自明的：客户端给一个消息发送目的地址列表，服务器分别组包发给每一个给定的目的地。当使用组时这就不高效了，因为目的地列表被分别发送没有确保对每个目的地发送非重复数据。
3.2.2 对组（频道）
频道具有与多播组相同的角色。它们的存在是动态的（来和走就像人们加入和离开），在一个频道上的实际对话会被发送到提供频道的服务器上。如果有一个服务器上的多个用户在相同的频道，这消息就会仅仅发送给服务器一次，接着发给频道里面其余客户端。这种行为会在客户端与服务器之间重复进行直到原始信息被分发并且送到每个频道成员。
下面的例子都参考图片2.
例子4：
任何在1客户端的频道，送到频道的消息会发送到服务器，然后哪也不去。
例子5：
一个频道的两个客户端，所有的消息都穿越一个路径，就好象他们是频道外的两个客户端的私有信息一样。
实例6：
客户端1,2,3在一个频道，发送到通道的所有消息都发送到所有客户端，并且只发送到那些必须由消息遍历的服务器(如果它是发送到单个客户端的私有消息)。如果客户端1发送一个消息，它会回到客户2 ，通过服务器b到客户3
3.2.3 到一个服务器的掩码
为了irc操作符可以发送消息给大量相关用户，服务器和主机提供了掩码消息。这些消息被送到那些主机或服务器信息和掩码匹配的用户中。这些消息仅仅使用跟频道相似的方式发送到用户所在位置
3.3 一对所有
一对所有类型的消息描述成广播信息更好，发送给所有客户端或服务器或同时都发送。在一个大的用户和数据库网络里面，一条消息能产生大量流量以送到所有所需的目的地。
对于一些消息，为了使服务器之间状态信息保持一致，除了发送给所有服务器没有其他选择。
3.3.1 客户端对客户端
没有一类消息，从一个单一的消息，发送到其他所有的客户端。、
3.3.2 客户端对服务器
默认大多数造成状态信息改变的命令（列入频道会员，频道模式，用户状态等等）都送到所有服务器，这个发布可能不被客户端所控制。
3.3.3 服务器到服务器
虽然大部分服务器之间的消息要被分发到其他所有服务器上，但是只有会影响到其他用户、频道或服务的才会被分发。在irc里面有一些基本项，几乎所有从服务器来的原始信息都要被广播到其他所有连接的服务器上。
4.

